<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <title>NAT traversal | Mysterium Docs</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    
    
    <link rel="stylesheet" href="https://mysteriumnetwork.github.io/documentation/scss/main.min.css">

    
    
    
    
    
    
    
    
    <meta name="theme-color" content="#563d7c">
</head>
<body><nav id="top-navigation" class="navbar navbar-expand-lg p-3 px-md-4 mb-3 align-items-center justify-content-between">
    <a class="navbar-brand mr-md-auto" href="/">
        <img src="https://mysteriumnetwork.github.io/images/logo.svg" style="width: 50px;" />
        Mysterium Docs
    </a>
    <button class="navbar-toggler text-dark" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
    >
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
        </ul>
        <ul class="navbar-nav">
            
            
                
                    <li class="nav-item">
                        <a class="nav-link" href="/documentation/getting-started">
                            
                            <span>Getting started</span>
                        </a>
                    </li>
                
            
                
                    <li class="nav-item">
                        <a class="nav-link" href="/documentation/node-runner">
                            
                            <span>Node runner guides</span>
                        </a>
                    </li>
                
            
                
                    <li class="nav-item">
                        <a class="nav-link" href="/documentation/developer">
                            
                            <span>Developer documentation</span>
                        </a>
                    </li>
                
            
                
                    <li class="nav-item">
                        <a class="nav-link" href="/documentation/residential-ip-network">
                            
                            <span>Residential IP network</span>
                        </a>
                    </li>
                
            
        </ul>
    </div>
</nav><div id="content">
    <div class="d-flex justify-content-between w-100">
        <div class="sidebar-container"><div class="sidebar-sticky">
    
    

    
        
    
        
    
        
    
        
    
        
            <h6 class="section-title">
                Node runner guides
            </h6>
            <ul class="section-page-list">
                
                    <li class="section-page">
                        <a href="/documentation/node-runner/getting-started/">Getting started</a>
                        <ul class="page-child-menu">
    
        <li class="page-child-item">
            <a href="/documentation/node-runner/getting-started/introduction/">Introduction</a>
            
        </li>
    
        <li class="page-child-item">
            <a href="/documentation/node-runner/getting-started/earnings/">Earnings</a>
            
                <ul class="page-child-submenu">
                    
                        <li class="page-child-submenu-item">
                            <a href="/documentation/node-runner/getting-started/earnings/bounty/">Bounty program</a>
                            <ul class="page-child-menu">
    
</ul>
                        </li>
                    
                        <li class="page-child-submenu-item">
                            <a href="/documentation/node-runner/getting-started/earnings/myst/">MYST Token</a>
                            <ul class="page-child-menu">
    
</ul>
                        </li>
                    
                        <li class="page-child-submenu-item">
                            <a href="/documentation/node-runner/getting-started/earnings/pricing/">Pricing</a>
                            <ul class="page-child-menu">
    
</ul>
                        </li>
                    
                </ul>
            
        </li>
    
</ul>
                    </li>
                
                    <li class="section-page">
                        <a href="/documentation/node-runner/maintenance/">Installation &amp; Configuration</a>
                        <ul class="page-child-menu">
    
        <li class="page-child-item">
            <a href="/documentation/node-runner/maintenance/raspberry-pi/">Raspberry Pi</a>
            
        </li>
    
        <li class="page-child-item">
            <a href="/documentation/node-runner/maintenance/linux/">Linux</a>
            
        </li>
    
        <li class="page-child-item">
            <a href="/documentation/node-runner/maintenance/docker/">Docker</a>
            
                <ul class="page-child-submenu">
                    
                        <li class="page-child-submenu-item">
                            <a href="/documentation/node-runner/maintenance/docker/linux/">Docker for Linux</a>
                            <ul class="page-child-menu">
    
</ul>
                        </li>
                    
                        <li class="page-child-submenu-item">
                            <a href="/documentation/node-runner/maintenance/docker/mac/">Docker for macOS</a>
                            <ul class="page-child-menu">
    
</ul>
                        </li>
                    
                        <li class="page-child-submenu-item">
                            <a href="/documentation/node-runner/maintenance/docker/windows/">Docker for Windows</a>
                            <ul class="page-child-menu">
    
</ul>
                        </li>
                    
                </ul>
            
        </li>
    
</ul>
                    </li>
                
                    <li class="section-page">
                        <a href="/documentation/node-runner/security/">Security</a>
                        <ul class="page-child-menu">
    
        <li class="page-child-item">
            <a href="/documentation/node-runner/security/access-policies/">Access policies</a>
            
        </li>
    
        <li class="page-child-item">
            <a href="/documentation/node-runner/security/legal-considerations/">Legal considerations</a>
            
        </li>
    
        <li class="page-child-item">
            <a href="/documentation/node-runner/security/network-security-and-firewalls/">Network security &amp; firewalls</a>
            
        </li>
    
        <li class="page-child-item">
            <a href="/documentation/node-runner/security/node-security/">Node Security</a>
            
                <ul class="page-child-submenu">
                    
                        <li class="page-child-submenu-item">
                            <a href="/documentation/node-runner/security/node-security/docker/">Node security for Docker</a>
                            <ul class="page-child-menu">
    
</ul>
                        </li>
                    
                        <li class="page-child-submenu-item">
                            <a href="/documentation/node-runner/security/node-security/linux/">Node security for Linux</a>
                            <ul class="page-child-menu">
    
</ul>
                        </li>
                    
                        <li class="page-child-submenu-item">
                            <a href="/documentation/node-runner/security/node-security/mac/">Node security for RaspberryPi</a>
                            <ul class="page-child-menu">
    
</ul>
                        </li>
                    
                        <li class="page-child-submenu-item">
                            <a href="/documentation/node-runner/security/node-security/windows/">Node security for Windows</a>
                            <ul class="page-child-menu">
    
</ul>
                        </li>
                    
                </ul>
            
        </li>
    
</ul>
                    </li>
                
                    <li class="section-page">
                        <a href="/documentation/node-runner/troubleshooting/">Troubleshooting</a>
                        <ul class="page-child-menu">
    
        <li class="page-child-item">
            <a href="/documentation/node-runner/troubleshooting/network/">Network troubleshooting</a>
            
                <ul class="page-child-submenu">
                    
                        <li class="page-child-submenu-item">
                            <a href="/documentation/node-runner/troubleshooting/network/firewall/">Firewall</a>
                            <ul class="page-child-menu">
    
</ul>
                        </li>
                    
                        <li class="page-child-submenu-item">
                            <a href="/documentation/node-runner/troubleshooting/network/nat-traversal/">NAT traversal</a>
                            <ul class="page-child-menu">
    
</ul>
                        </li>
                    
                        <li class="page-child-submenu-item">
                            <a href="/documentation/node-runner/troubleshooting/network/router-settings/">Router settings</a>
                            <ul class="page-child-menu">
    
</ul>
                        </li>
                    
                </ul>
            
        </li>
    
        <li class="page-child-item">
            <a href="/documentation/node-runner/troubleshooting/node/">Node troubleshooting</a>
            
        </li>
    
        <li class="page-child-item">
            <a href="/documentation/node-runner/troubleshooting/payments/">Payment troubleshooting</a>
            
                <ul class="page-child-submenu">
                    
                        <li class="page-child-submenu-item">
                            <a href="/documentation/node-runner/troubleshooting/payments/bounty-payments/">Bounty payments</a>
                            <ul class="page-child-menu">
    
</ul>
                        </li>
                    
                        <li class="page-child-submenu-item">
                            <a href="/documentation/node-runner/troubleshooting/payments/mystt-calculation/">MYSTT calculation</a>
                            <ul class="page-child-menu">
    
</ul>
                        </li>
                    
                </ul>
            
        </li>
    
</ul>
                    </li>
                
            </ul>
        
    
</div></div>
        <div class="content-container"><div class="post">
        <h1>NAT traversal</h1>
        
        <p>NAT Traversal also known as UDP encapsulation allows traffic to get to the specified destination when a device does not have a public IP address. This is usually the case if your ISP is doing NAT, or the external interface of your firewall is connected to a device that has NAT enabled.</p>
<p>The shortage of IPv4 addresses and the very slow transition to IPv6 leads to pragmatic solutions in the Internet: today many hosts are still using IPv4 and are connected to the Internet over a Network Address Translation (NAT) router. However, there are many applications, which need inbound connections, like e.g. peer-to-peer-based systems or voice-over-IP. For such NATed hosts inbound connections usually pose a problem, since without additional measures the router/firewall filters the incoming connection attempts. These additional measures are usually referred to as NAT traversal mechanisms and hole punching is one of those techniques.</p>
<p><em>Hole punching</em> (or sometimes <em>punch</em>-through) is one of the most common techniques in computer networking for establishing a direct UDP connection between two parties in which one or both are behind firewalls or behind routers that use network address translation (<em>NAT</em>). It is called <em>UDP hole punching</em> because it <em>punches</em> a <em>hole</em> in the firewall of the network which allows a packet from an outside system to successfully reach the desired client on a network using NAT.</p>
<h2 id="enable-nat-traversal-hole-punching-mechanism">Enable NAT traversal (hole punching) mechanism</h2>
<h6 id="currently-if-port-mapping-succeeded-mysterium-is-skipping-the-nat-hole-punching-on-the-other-hand-if-port-mapping-process-fails-we-can-skip-it-by-adding-a-flag-to-disable-nat-port-mapping---nat-port-mappingfalse">Currently, If port mapping succeeded, Mysterium is skipping the NAT hole punching. On the other hand, if port mapping process fails, we can skip it by adding a flag to disable NAT port mapping: *<em>&ndash;nat-port-mapping=false</em></h6>
<p>Alternatively, providers can skip the process of manual port configuration and disable UPnP in their routers (if enabled). In this scenario, NAT hole punching will be prioritised and executed against port mapping processes.</p>
<h2 id="disable-nat-traversal-hole-punching-mechanism">Disable NAT traversal (hole punching) mechanism</h2>
<p>While in most cases NAT hole punch helps the Mysterium node runners to establish the connection with our network consumers, the technique is not applicable in all scenarios or with all types of NATs, as NAT operating characteristics are not standardized.<br>
If this approach does not work for you, you can try the following:</p>
<ol>
<li>Enable UPnP feature. UPnP and NAT-PNP protocols provides automatic port configuration features for various routers (gateways). Some routers have these features enabled by default, some have not. </li>
<li>Manually forward a port in your router.</li>
<li>Add the following flag into service configuration file: <em>&ndash;experiment-natpunching=false</em></li>
</ol>
<div class="row mt-5">
    <div class="col-md-4 text-left">
        
            <a href="https://mysteriumnetwork.github.io/documentation/node-runner/troubleshooting/network/firewall/">&laquo; Firewall</a>
        
    </div>

    <div class="col-md-4 text-center">
        <a href="https://github.com/mysteriumnetwork/documentation/tree/master/content/node-runner/troubleshooting/network/nat-traversal.md" target="_blank">
            See how this could be improved? Edit on Github.
        </a>
    </div>

    <div class="col-md-4 text-right">
        
            <a href="https://mysteriumnetwork.github.io/documentation/node-runner/troubleshooting/network/router-settings/">Router settings &raquo;</a>
        
    </div>
</div><div class="my-5">
            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "mysterium-docs" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </div>
        </div>
        <div class="toc-container align-self-start">
            
                <h5>Table of contents</h5>
            
            <nav id="TableOfContents">
  <ul>
    <li><a href="#enable-nat-traversal-hole-punching-mechanism">Enable NAT traversal (hole punching) mechanism</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#disable-nat-traversal-hole-punching-mechanism">Disable NAT traversal (hole punching) mechanism</a></li>
  </ul>
</nav>
        </div>
    </div>
</div><div class="row">
    <div class="col-md-12 text-center my-5">
        Mysterium Network &copy; 2020
    </div>
</div><script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
</body>
</html>
